# 최종 YAML 코드 (디버깅 스텝 추가)
name: Daily S&P 500 EMA Tracker
# ... (on: 및 jobs: run-ema-analysis: runs-on: ubuntu-latest) 생략

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          
      # ***** 디버깅 스텝 추가 *****
      - name: Debug File Path and List Files
        run: |
          pwd
          ls -al
          ls -al spx_alignment/
      # ***************************

      - name: Run EMA analysis script
        # cd 명령어는 제거합니다. 디버그 스텝에서 위치를 파악할 것입니다.
        run: python sp500_ema_trend_with_telegram_v3.py
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
